{"ast":null,"code":"import { createAsyncThunk, isAnyOf } from '@reduxjs/toolkit';\nimport { createSlice } from '@reduxjs/toolkit';\nimport Agent from '../../App/Api/Agent';\nconst initialState = {\n  user: null\n};\nexport const signInUser = createAsyncThunk('/account/signInUser', async (data, thunkAPI) => {\n  try {\n    const user = await Agent.Account.login(data);\n    localStorage.setItem('user', JSON.stringify(user));\n    return user;\n  } catch (error) {\n    return thunkAPI.rejectWithValue({\n      error: error.data\n    });\n  }\n});\nexport const fetchCurrentUser = createAsyncThunk('/account/signInUser', async (_, thunkAPI) => {\n  try {\n    const user = await Agent.Account.currentUser();\n    localStorage.setItem('user', JSON.stringify(user));\n    return user;\n  } catch (error) {\n    return thunkAPI.rejectWithValue({\n      error: error.data\n    });\n  }\n});\nexport const accountSlice = createSlice({\n  name: 'account',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addMatcher(isAnyOf(signInUser.fulfilled, fetchCurrentUser.fulfilled), (state, action) => {\n      state.user = action.payload;\n    });\n    builder.addMatcher(isAnyOf(signInUser.rejected, fetchCurrentUser));\n  }\n});","map":{"version":3,"names":["createAsyncThunk","isAnyOf","createSlice","Agent","initialState","user","signInUser","data","thunkAPI","Account","login","localStorage","setItem","JSON","stringify","error","rejectWithValue","fetchCurrentUser","_","currentUser","accountSlice","name","reducers","extraReducers","builder","addMatcher","fulfilled","state","action","payload","rejected"],"sources":["D:/Project/client/src/Features/Account/AccountSlice.ts"],"sourcesContent":["import { FieldValues } from 'react-hook-form';\r\nimport { createAsyncThunk, isAnyOf } from '@reduxjs/toolkit';\r\nimport { createSlice } from '@reduxjs/toolkit';\r\nimport { User } from \"../../App/Models/User\";\r\nimport Agent from '../../App/Api/Agent';\r\n\r\ninterface AccountState{\r\n    user:User | null;\r\n}\r\n\r\nconst initialState: AccountState = {\r\n    user:null\r\n}\r\n\r\nexport const signInUser = createAsyncThunk<User, {data:FieldValues}>(\r\n    '/account/signInUser',\r\n    async (data, thunkAPI) => {\r\n        try{\r\n            const user = await Agent.Account.login(data);\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user;\r\n        }\r\n        catch(error:any){\r\n            return thunkAPI.rejectWithValue({error:error.data})\r\n        }\r\n    }\r\n)\r\n\r\nexport const fetchCurrentUser = createAsyncThunk(\r\n    '/account/signInUser',\r\n    async (_, thunkAPI) => {\r\n        try{\r\n            const user = await Agent.Account.currentUser();\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            return user;\r\n        }\r\n        catch(error:any){\r\n            return thunkAPI.rejectWithValue({error:error.data})\r\n        }\r\n    }\r\n)\r\n\r\nexport const accountSlice = createSlice({\r\n    name:'account',\r\n    initialState,\r\n    reducers:{},\r\n    extraReducers:(builder => {\r\n        builder.addMatcher(isAnyOf(signInUser.fulfilled, fetchCurrentUser.fulfilled),\r\n        (state, action) => {\r\n            state.user = action.payload\r\n        });\r\n        builder.addMatcher(isAnyOf(signInUser.rejected, fetchCurrentUser))\r\n    })\r\n})"],"mappings":"AACA,SAASA,gBAAT,EAA2BC,OAA3B,QAA0C,kBAA1C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AAEA,OAAOC,KAAP,MAAkB,qBAAlB;AAMA,MAAMC,YAA0B,GAAG;EAC/BC,IAAI,EAAC;AAD0B,CAAnC;AAIA,OAAO,MAAMC,UAAU,GAAGN,gBAAgB,CACtC,qBADsC,EAEtC,OAAOO,IAAP,EAAaC,QAAb,KAA0B;EACtB,IAAG;IACC,MAAMH,IAAI,GAAG,MAAMF,KAAK,CAACM,OAAN,CAAcC,KAAd,CAAoBH,IAApB,CAAnB;IACAI,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAA7B;IACA,OAAOA,IAAP;EACH,CAJD,CAKA,OAAMU,KAAN,EAAgB;IACZ,OAAOP,QAAQ,CAACQ,eAAT,CAAyB;MAACD,KAAK,EAACA,KAAK,CAACR;IAAb,CAAzB,CAAP;EACH;AACJ,CAXqC,CAAnC;AAcP,OAAO,MAAMU,gBAAgB,GAAGjB,gBAAgB,CAC5C,qBAD4C,EAE5C,OAAOkB,CAAP,EAAUV,QAAV,KAAuB;EACnB,IAAG;IACC,MAAMH,IAAI,GAAG,MAAMF,KAAK,CAACM,OAAN,CAAcU,WAAd,EAAnB;IACAR,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeT,IAAf,CAA7B;IACA,OAAOA,IAAP;EACH,CAJD,CAKA,OAAMU,KAAN,EAAgB;IACZ,OAAOP,QAAQ,CAACQ,eAAT,CAAyB;MAACD,KAAK,EAACA,KAAK,CAACR;IAAb,CAAzB,CAAP;EACH;AACJ,CAX2C,CAAzC;AAcP,OAAO,MAAMa,YAAY,GAAGlB,WAAW,CAAC;EACpCmB,IAAI,EAAC,SAD+B;EAEpCjB,YAFoC;EAGpCkB,QAAQ,EAAC,EAH2B;EAIpCC,aAAa,EAAEC,OAAO,IAAI;IACtBA,OAAO,CAACC,UAAR,CAAmBxB,OAAO,CAACK,UAAU,CAACoB,SAAZ,EAAuBT,gBAAgB,CAACS,SAAxC,CAA1B,EACA,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACfD,KAAK,CAACtB,IAAN,GAAauB,MAAM,CAACC,OAApB;IACH,CAHD;IAIAL,OAAO,CAACC,UAAR,CAAmBxB,OAAO,CAACK,UAAU,CAACwB,QAAZ,EAAsBb,gBAAtB,CAA1B;EACH;AAVmC,CAAD,CAAhC"},"metadata":{},"sourceType":"module"}