{"ast":null,"code":"import { createAsyncThunk, createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\nimport Agent from \"../../App/Api/Agent\";\nconst productsAdapter = createEntityAdapter();\nexport const fetchProductsAsync = createAsyncThunk('catalog/fetchProductsAsync', async (_, thunkAPI) => {\n  try {\n    return await Agent.Catalog.list();\n  } catch (error) {\n    return thunkAPI.rejectWithValue({\n      error: error.data\n    });\n  }\n});\nexport const fetchProductAsync = createAsyncThunk('catalog/fetchProductAsync', async (productId, thunkAPI) => {\n  try {\n    return await Agent.Catalog.details(productId);\n  } catch (error) {\n    console.log(error);\n    return thunkAPI.rejectWithValue({\n      error: error.data\n    });\n  }\n});\nexport const fetchFilterAsync = createAsyncThunk('catalog/fetchFilterAsync', async (_, thunkAPI) => {\n  try {\n    return await Agent.Catalog.fetchFilters();\n  } catch (error) {\n    return thunkAPI.rejectWithValue({\n      error: error.data\n    });\n  }\n});\nexport const catalogSlice = createSlice({\n  name: 'slice',\n  initialState: productsAdapter.getInitialState({\n    productsLoaded: false,\n    filtersLoaded: false,\n    status: 'idle',\n    gender: [],\n    size: []\n  }),\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchProductsAsync.pending, state => {\n      state.status = 'pendingFetchProducts';\n    });\n    builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\n      productsAdapter.setAll(state, action.payload);\n      state.status = 'idle';\n      state.productsLoaded = true;\n    });\n    builder.addCase(fetchProductsAsync.rejected, state => {\n      state.status = 'idle';\n    }); ///loading single product\n\n    builder.addCase(fetchProductAsync.pending, state => {\n      state.status = 'pendingFetchProduct';\n    });\n    builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\n      productsAdapter.upsertOne(state, action.payload);\n      state.status = 'idle';\n    });\n    builder.addCase(fetchProductAsync.rejected, (state, action) => {\n      state.status = 'idle';\n    }); //Loading Filters\n\n    builder.addCase(fetchFilterAsync.pending, state => {\n      state.status = 'pendingFetchFilters';\n    });\n    builder.addCase(fetchFilterAsync.fulfilled, (state, action) => {\n      state.gender = action.payload.gender;\n      state.size = action.payload.size;\n      state.filtersLoaded = true;\n    });\n    builder.addCase(fetchFilterAsync.rejected, (state, action) => {\n      state.status = 'idle';\n      console.log(action.payload);\n    });\n  }\n});\nexport const productSelectors = productsAdapter.getSelectors(state => state.catalog);","map":{"version":3,"names":["createAsyncThunk","createEntityAdapter","createSlice","Agent","productsAdapter","fetchProductsAsync","_","thunkAPI","Catalog","list","error","rejectWithValue","data","fetchProductAsync","productId","details","console","log","fetchFilterAsync","fetchFilters","catalogSlice","name","initialState","getInitialState","productsLoaded","filtersLoaded","status","gender","size","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","setAll","payload","rejected","upsertOne","productSelectors","getSelectors","catalog"],"sources":["D:/Project/client/src/Features/Catalog/CatalogSlice.ts"],"sourcesContent":["import { RootState } from './../../App/Store/ConfigureStore';\r\nimport { stat } from 'fs';\r\nimport { createAsyncThunk, createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\nimport Agent from \"../../App/Api/Agent\";\r\nimport { Product } from \"../../App/Models/Product\";\r\n\r\nconst productsAdapter = createEntityAdapter<Product>();\r\n\r\nexport const fetchProductsAsync = createAsyncThunk<Product[]>(\r\n    'catalog/fetchProductsAsync',\r\n    async (_, thunkAPI) => {\r\n        try {\r\n            return await Agent.Catalog.list();\r\n        } catch (error: any) {\r\n            return thunkAPI.rejectWithValue({ error: error.data })\r\n        }\r\n    }\r\n)\r\n\r\nexport const fetchProductAsync = createAsyncThunk<Product, number>(\r\n    'catalog/fetchProductAsync',\r\n    async (productId, thunkAPI) => {\r\n        try {\r\n            return await Agent.Catalog.details(productId);\r\n        } catch (error: any) {\r\n            console.log(error)\r\n            return thunkAPI.rejectWithValue({ error: error.data })\r\n        }\r\n    }\r\n)\r\n\r\nexport const fetchFilterAsync = createAsyncThunk(\r\n    'catalog/fetchFilterAsync',\r\n    async (_, thunkAPI) => {\r\n        try {\r\n            return await Agent.Catalog.fetchFilters();\r\n        } catch (error: any) {\r\n            return thunkAPI.rejectWithValue({ error: error.data })\r\n        }\r\n    }\r\n)\r\n\r\nexport const catalogSlice = createSlice({\r\n    name: 'slice',\r\n    initialState: productsAdapter.getInitialState({\r\n        productsLoaded: false,\r\n        filtersLoaded: false,\r\n        status: 'idle',\r\n        gender: [],\r\n        size: []\r\n    }),\r\n    reducers: {},\r\n    extraReducers: (builder) => {\r\n        builder.addCase(fetchProductsAsync.pending, (state) => {\r\n            state.status = 'pendingFetchProducts';\r\n        });\r\n        builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\r\n            productsAdapter.setAll(state, action.payload);\r\n            state.status = 'idle';\r\n            state.productsLoaded = true;\r\n        });\r\n        builder.addCase(fetchProductsAsync.rejected, (state) => {\r\n            state.status = 'idle';\r\n        })\r\n        ///loading single product\r\n\r\n        builder.addCase(fetchProductAsync.pending, (state) => {\r\n            state.status = 'pendingFetchProduct';\r\n        })\r\n        builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\r\n            productsAdapter.upsertOne(state, action.payload);\r\n            state.status = 'idle';\r\n        })\r\n        builder.addCase(fetchProductAsync.rejected, (state, action) => {\r\n            state.status = 'idle';\r\n        })\r\n        //Loading Filters\r\n        builder.addCase(fetchFilterAsync.pending, (state) => {\r\n            state.status = 'pendingFetchFilters';\r\n        })\r\n        builder.addCase(fetchFilterAsync.fulfilled, (state, action) => {\r\n            state.gender = action.payload.gender;\r\n            state.size = action.payload.size;\r\n            state.filtersLoaded = true;\r\n        })\r\n        builder.addCase(fetchFilterAsync.rejected, (state, action) => {\r\n            state.status = 'idle';\r\n            console.log(action.payload)\r\n        })\r\n    }\r\n})\r\n\r\nexport const productSelectors = productsAdapter.getSelectors((state: RootState) => state.catalog);\r\n"],"mappings":"AAEA,SAASA,gBAAT,EAA2BC,mBAA3B,EAAgDC,WAAhD,QAAmE,kBAAnE;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AAGA,MAAMC,eAAe,GAAGH,mBAAmB,EAA3C;AAEA,OAAO,MAAMI,kBAAkB,GAAGL,gBAAgB,CAC9C,4BAD8C,EAE9C,OAAOM,CAAP,EAAUC,QAAV,KAAuB;EACnB,IAAI;IACA,OAAO,MAAMJ,KAAK,CAACK,OAAN,CAAcC,IAAd,EAAb;EACH,CAFD,CAEE,OAAOC,KAAP,EAAmB;IACjB,OAAOH,QAAQ,CAACI,eAAT,CAAyB;MAAED,KAAK,EAAEA,KAAK,CAACE;IAAf,CAAzB,CAAP;EACH;AACJ,CAR6C,CAA3C;AAWP,OAAO,MAAMC,iBAAiB,GAAGb,gBAAgB,CAC7C,2BAD6C,EAE7C,OAAOc,SAAP,EAAkBP,QAAlB,KAA+B;EAC3B,IAAI;IACA,OAAO,MAAMJ,KAAK,CAACK,OAAN,CAAcO,OAAd,CAAsBD,SAAtB,CAAb;EACH,CAFD,CAEE,OAAOJ,KAAP,EAAmB;IACjBM,OAAO,CAACC,GAAR,CAAYP,KAAZ;IACA,OAAOH,QAAQ,CAACI,eAAT,CAAyB;MAAED,KAAK,EAAEA,KAAK,CAACE;IAAf,CAAzB,CAAP;EACH;AACJ,CAT4C,CAA1C;AAYP,OAAO,MAAMM,gBAAgB,GAAGlB,gBAAgB,CAC5C,0BAD4C,EAE5C,OAAOM,CAAP,EAAUC,QAAV,KAAuB;EACnB,IAAI;IACA,OAAO,MAAMJ,KAAK,CAACK,OAAN,CAAcW,YAAd,EAAb;EACH,CAFD,CAEE,OAAOT,KAAP,EAAmB;IACjB,OAAOH,QAAQ,CAACI,eAAT,CAAyB;MAAED,KAAK,EAAEA,KAAK,CAACE;IAAf,CAAzB,CAAP;EACH;AACJ,CAR2C,CAAzC;AAWP,OAAO,MAAMQ,YAAY,GAAGlB,WAAW,CAAC;EACpCmB,IAAI,EAAE,OAD8B;EAEpCC,YAAY,EAAElB,eAAe,CAACmB,eAAhB,CAAgC;IAC1CC,cAAc,EAAE,KAD0B;IAE1CC,aAAa,EAAE,KAF2B;IAG1CC,MAAM,EAAE,MAHkC;IAI1CC,MAAM,EAAE,EAJkC;IAK1CC,IAAI,EAAE;EALoC,CAAhC,CAFsB;EASpCC,QAAQ,EAAE,EAT0B;EAUpCC,aAAa,EAAGC,OAAD,IAAa;IACxBA,OAAO,CAACC,OAAR,CAAgB3B,kBAAkB,CAAC4B,OAAnC,EAA6CC,KAAD,IAAW;MACnDA,KAAK,CAACR,MAAN,GAAe,sBAAf;IACH,CAFD;IAGAK,OAAO,CAACC,OAAR,CAAgB3B,kBAAkB,CAAC8B,SAAnC,EAA8C,CAACD,KAAD,EAAQE,MAAR,KAAmB;MAC7DhC,eAAe,CAACiC,MAAhB,CAAuBH,KAAvB,EAA8BE,MAAM,CAACE,OAArC;MACAJ,KAAK,CAACR,MAAN,GAAe,MAAf;MACAQ,KAAK,CAACV,cAAN,GAAuB,IAAvB;IACH,CAJD;IAKAO,OAAO,CAACC,OAAR,CAAgB3B,kBAAkB,CAACkC,QAAnC,EAA8CL,KAAD,IAAW;MACpDA,KAAK,CAACR,MAAN,GAAe,MAAf;IACH,CAFD,EATwB,CAYxB;;IAEAK,OAAO,CAACC,OAAR,CAAgBnB,iBAAiB,CAACoB,OAAlC,EAA4CC,KAAD,IAAW;MAClDA,KAAK,CAACR,MAAN,GAAe,qBAAf;IACH,CAFD;IAGAK,OAAO,CAACC,OAAR,CAAgBnB,iBAAiB,CAACsB,SAAlC,EAA6C,CAACD,KAAD,EAAQE,MAAR,KAAmB;MAC5DhC,eAAe,CAACoC,SAAhB,CAA0BN,KAA1B,EAAiCE,MAAM,CAACE,OAAxC;MACAJ,KAAK,CAACR,MAAN,GAAe,MAAf;IACH,CAHD;IAIAK,OAAO,CAACC,OAAR,CAAgBnB,iBAAiB,CAAC0B,QAAlC,EAA4C,CAACL,KAAD,EAAQE,MAAR,KAAmB;MAC3DF,KAAK,CAACR,MAAN,GAAe,MAAf;IACH,CAFD,EArBwB,CAwBxB;;IACAK,OAAO,CAACC,OAAR,CAAgBd,gBAAgB,CAACe,OAAjC,EAA2CC,KAAD,IAAW;MACjDA,KAAK,CAACR,MAAN,GAAe,qBAAf;IACH,CAFD;IAGAK,OAAO,CAACC,OAAR,CAAgBd,gBAAgB,CAACiB,SAAjC,EAA4C,CAACD,KAAD,EAAQE,MAAR,KAAmB;MAC3DF,KAAK,CAACP,MAAN,GAAeS,MAAM,CAACE,OAAP,CAAeX,MAA9B;MACAO,KAAK,CAACN,IAAN,GAAaQ,MAAM,CAACE,OAAP,CAAeV,IAA5B;MACAM,KAAK,CAACT,aAAN,GAAsB,IAAtB;IACH,CAJD;IAKAM,OAAO,CAACC,OAAR,CAAgBd,gBAAgB,CAACqB,QAAjC,EAA2C,CAACL,KAAD,EAAQE,MAAR,KAAmB;MAC1DF,KAAK,CAACR,MAAN,GAAe,MAAf;MACAV,OAAO,CAACC,GAAR,CAAYmB,MAAM,CAACE,OAAnB;IACH,CAHD;EAIH;AA/CmC,CAAD,CAAhC;AAkDP,OAAO,MAAMG,gBAAgB,GAAGrC,eAAe,CAACsC,YAAhB,CAA8BR,KAAD,IAAsBA,KAAK,CAACS,OAAzD,CAAzB"},"metadata":{},"sourceType":"module"}