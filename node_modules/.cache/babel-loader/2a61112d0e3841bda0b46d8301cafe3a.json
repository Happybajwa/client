{"ast":null,"code":"import { createAsyncThunk, createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\nimport Agent from \"../../App/Api/Agent\";\nconst productsAdapter = createEntityAdapter();\nexport const fetchProductsAsync = createAsyncThunk('catalog/fetchProductsAsync', async () => {\n  try {\n    return await Agent.Catalog.list();\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const fetchProductAsync = createAsyncThunk('catalog/fetchProductAsync', async (productId, thunkAPI) => {\n  try {\n    return await Agent.Catalog.details(productId);\n  } catch (error) {\n    console.log(error);\n    return thunkAPI.re;\n  }\n});\nexport const catalogSlice = createSlice({\n  name: 'slice',\n  initialState: productsAdapter.getInitialState({\n    productsLoaded: false,\n    status: 'idle'\n  }),\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchProductsAsync.pending, state => {\n      state.status = 'pendingFetchProducts';\n    });\n    builder.addCase(fetchProductsAsync.fulfilled, (state, action) => {\n      productsAdapter.setAll(state, action.payload);\n      state.status = 'idle';\n      state.productsLoaded = true;\n    });\n    builder.addCase(fetchProductsAsync.rejected, state => {\n      state.status = 'idle';\n    }); ///loading single product\n\n    builder.addCase(fetchProductAsync.pending, state => {\n      state.status = 'pendingFetchProduct';\n    });\n    builder.addCase(fetchProductAsync.fulfilled, (state, action) => {\n      productsAdapter.upsertOne(state, action.payload);\n      state.status = 'idle';\n    });\n    builder.addCase(fetchProductAsync.rejected, state => {\n      state.status = 'idle';\n    });\n  }\n});\nexport const productSelectors = productsAdapter.getSelectors(state => state.catalog);","map":{"version":3,"names":["createAsyncThunk","createEntityAdapter","createSlice","Agent","productsAdapter","fetchProductsAsync","Catalog","list","error","console","log","fetchProductAsync","productId","thunkAPI","details","re","catalogSlice","name","initialState","getInitialState","productsLoaded","status","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","setAll","payload","rejected","upsertOne","productSelectors","getSelectors","catalog"],"sources":["D:/Project/client/src/Features/Catalog/CatalogSlice.ts"],"sourcesContent":["import { RootState } from './../../App/Store/ConfigureStore';\r\nimport { stat } from 'fs';\r\nimport { createAsyncThunk, createEntityAdapter, createSlice } from \"@reduxjs/toolkit\";\r\nimport Agent from \"../../App/Api/Agent\";\r\nimport { Product } from \"../../App/Models/Product\";\r\n\r\nconst productsAdapter = createEntityAdapter<Product>();\r\n\r\nexport const fetchProductsAsync = createAsyncThunk<Product[]>(\r\n    'catalog/fetchProductsAsync',\r\n    async() => {\r\n        try{\r\n            return await Agent.Catalog.list();\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n)\r\n\r\nexport const fetchProductAsync = createAsyncThunk<Product, number>(\r\n    'catalog/fetchProductAsync',\r\n    async(productId, thunkAPI) => {\r\n        try{\r\n            return await Agent.Catalog.details(productId);\r\n        }catch(error){\r\n            console.log(error)\r\n            return thunkAPI.re\r\n        }\r\n    }\r\n)\r\n\r\nexport const catalogSlice = createSlice({\r\n    name:'slice',\r\n    initialState:productsAdapter.getInitialState({\r\n        productsLoaded:false,\r\n        status:'idle'\r\n    }),\r\n    reducers:{},\r\n    extraReducers:(builder) => {\r\n        builder.addCase(fetchProductsAsync.pending, (state) => {\r\n            state.status = 'pendingFetchProducts';\r\n        });\r\n        builder.addCase(fetchProductsAsync.fulfilled, (state, action) =>{\r\n            productsAdapter.setAll(state, action.payload);\r\n            state.status = 'idle';\r\n            state.productsLoaded = true;\r\n        });\r\n        builder.addCase(fetchProductsAsync.rejected, (state) =>{\r\n            state.status = 'idle';\r\n        })\r\n        ///loading single product\r\n\r\n        builder.addCase(fetchProductAsync.pending,(state) =>{\r\n            state.status='pendingFetchProduct';\r\n        })\r\n        builder.addCase(fetchProductAsync.fulfilled,(state, action) =>{\r\n            productsAdapter.upsertOne(state, action.payload);\r\n            state.status='idle';\r\n        })\r\n        builder.addCase(fetchProductAsync.rejected,(state) =>{\r\n            state.status='idle';\r\n        })\r\n    }\r\n})\r\n\r\nexport const productSelectors = productsAdapter.getSelectors((state: RootState) => state.catalog);\r\n"],"mappings":"AAEA,SAASA,gBAAT,EAA2BC,mBAA3B,EAAgDC,WAAhD,QAAmE,kBAAnE;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AAGA,MAAMC,eAAe,GAAGH,mBAAmB,EAA3C;AAEA,OAAO,MAAMI,kBAAkB,GAAGL,gBAAgB,CAC9C,4BAD8C,EAE9C,YAAW;EACP,IAAG;IACC,OAAO,MAAMG,KAAK,CAACG,OAAN,CAAcC,IAAd,EAAb;EACH,CAFD,CAEC,OAAMC,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;EACH;AACJ,CAR6C,CAA3C;AAWP,OAAO,MAAMG,iBAAiB,GAAGX,gBAAgB,CAC7C,2BAD6C,EAE7C,OAAMY,SAAN,EAAiBC,QAAjB,KAA8B;EAC1B,IAAG;IACC,OAAO,MAAMV,KAAK,CAACG,OAAN,CAAcQ,OAAd,CAAsBF,SAAtB,CAAb;EACH,CAFD,CAEC,OAAMJ,KAAN,EAAY;IACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;IACA,OAAOK,QAAQ,CAACE,EAAhB;EACH;AACJ,CAT4C,CAA1C;AAYP,OAAO,MAAMC,YAAY,GAAGd,WAAW,CAAC;EACpCe,IAAI,EAAC,OAD+B;EAEpCC,YAAY,EAACd,eAAe,CAACe,eAAhB,CAAgC;IACzCC,cAAc,EAAC,KAD0B;IAEzCC,MAAM,EAAC;EAFkC,CAAhC,CAFuB;EAMpCC,QAAQ,EAAC,EAN2B;EAOpCC,aAAa,EAAEC,OAAD,IAAa;IACvBA,OAAO,CAACC,OAAR,CAAgBpB,kBAAkB,CAACqB,OAAnC,EAA6CC,KAAD,IAAW;MACnDA,KAAK,CAACN,MAAN,GAAe,sBAAf;IACH,CAFD;IAGAG,OAAO,CAACC,OAAR,CAAgBpB,kBAAkB,CAACuB,SAAnC,EAA8C,CAACD,KAAD,EAAQE,MAAR,KAAkB;MAC5DzB,eAAe,CAAC0B,MAAhB,CAAuBH,KAAvB,EAA8BE,MAAM,CAACE,OAArC;MACAJ,KAAK,CAACN,MAAN,GAAe,MAAf;MACAM,KAAK,CAACP,cAAN,GAAuB,IAAvB;IACH,CAJD;IAKAI,OAAO,CAACC,OAAR,CAAgBpB,kBAAkB,CAAC2B,QAAnC,EAA8CL,KAAD,IAAU;MACnDA,KAAK,CAACN,MAAN,GAAe,MAAf;IACH,CAFD,EATuB,CAYvB;;IAEAG,OAAO,CAACC,OAAR,CAAgBd,iBAAiB,CAACe,OAAlC,EAA2CC,KAAD,IAAU;MAChDA,KAAK,CAACN,MAAN,GAAa,qBAAb;IACH,CAFD;IAGAG,OAAO,CAACC,OAAR,CAAgBd,iBAAiB,CAACiB,SAAlC,EAA4C,CAACD,KAAD,EAAQE,MAAR,KAAkB;MAC1DzB,eAAe,CAAC6B,SAAhB,CAA0BN,KAA1B,EAAiCE,MAAM,CAACE,OAAxC;MACAJ,KAAK,CAACN,MAAN,GAAa,MAAb;IACH,CAHD;IAIAG,OAAO,CAACC,OAAR,CAAgBd,iBAAiB,CAACqB,QAAlC,EAA4CL,KAAD,IAAU;MACjDA,KAAK,CAACN,MAAN,GAAa,MAAb;IACH,CAFD;EAGH;AA/BmC,CAAD,CAAhC;AAkCP,OAAO,MAAMa,gBAAgB,GAAG9B,eAAe,CAAC+B,YAAhB,CAA8BR,KAAD,IAAsBA,KAAK,CAACS,OAAzD,CAAzB"},"metadata":{},"sourceType":"module"}